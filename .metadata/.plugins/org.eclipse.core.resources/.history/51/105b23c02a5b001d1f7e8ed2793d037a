/*
 * display7SEG.c
 *
 *  Created on: Nov 3, 2022
 *      Author: Admin
 */

#include "display7SEG.h"

int SEG7_buffer[10] = {0x40, 0x79, 0x24, 0x30, 0x19, 0x12, 0x02, 0x78, 0x00, 0x10};
int update_buffer[4] = {1, 2, 3, 4};
int EN_buffer[4] = {0xE, 0xD, 0xB, 0x7};

int Get_Chuc(int number){
    return ((number%100/10));
}

int Get_Don_vi(int number){
    (number%10);

    return Hang_Don_Vi;
}

void update7SEG(uint8_t num){
	switch(num){
	case 0:
		update_buffer[0] = Get_chuc(num);
		update_buffer[1] = Get_don_vi(num);
	case 1:
		update_buffer[2] = Get_chuc(num);
		update_buffer[3] = Get_don_vi(num);
	}
}
void display7SEG(uint8_t num){
	HAL_GPIO_WritePin(a_GPIO_Port, a_Pin, ((SEG7_buffer[num] >> 0) & 0x01));
	HAL_GPIO_WritePin(b_GPIO_Port, b_Pin, ((SEG7_buffer[num] >> 1) & 0x01));
	HAL_GPIO_WritePin(c_GPIO_Port, c_Pin, ((SEG7_buffer[num] >> 2) & 0x01));
	HAL_GPIO_WritePin(d_GPIO_Port, d_Pin, ((SEG7_buffer[num] >> 3) & 0x01));
	HAL_GPIO_WritePin(e_GPIO_Port, e_Pin, ((SEG7_buffer[num] >> 4) & 0x01));
	HAL_GPIO_WritePin(f_GPIO_Port, f_Pin, ((SEG7_buffer[num] >> 5) & 0x01));
	HAL_GPIO_WritePin(g_GPIO_Port, g_Pin, ((SEG7_buffer[num] >> 6) & 0x01));
}

void EnableWhich(int num){
	HAL_GPIO_WritePin(EN0_GPIO_Port, EN0_Pin, ((update_buffer[num] >> 0) & 0x01));
	HAL_GPIO_WritePin(EN1_GPIO_Port, EN1_Pin, ((update_buffer[num] >> 1) & 0x01));
	HAL_GPIO_WritePin(EN2_GPIO_Port, EN2_Pin, ((update_buffer[num] >> 2) & 0x01));
	HAL_GPIO_WritePin(EN3_GPIO_Port, EN3_Pin, ((update_buffer[num] >> 3) & 0x01));
}

/*
 * fsm_auto.c
 *
 *  Created on: Nov 4, 2022
 *      Author: Admin
 */

#include "fsm_auto.h"

void fsm_simple_buttons_run (){
	if(mode == NORMAL){
		switch(LED_BLINK){
		case INIT:
			LED_BLINK = BLINK;
			setTimer1(100);
			break;
		case BLINK:
			if(timer1_flag == 1){
				RIDE_ON();
				display7SEG1(counterRED);
				counterRED--;
				if(counterRED <= INIT) counterRED = AUTO_RED;
				setTimer1(100);
			}
			break;
		default:
			break;
		}

		switch(mode){
			case NORMAL:
				if (isButtonPressed(RES) == 1) mode = MODE2;
				if (isButtonPressed(INC) == 1) mode = MODE2;
				if (isButtonPressed(DEC) == 1) mode = MODE2;
				break;
			case RESET:
				if (isButtonPressed(BUTTON1) == 1) mode = MODE3;
				break;
			case INC:
				if (isButtonPressed(BUTTON1) == 1) mode = MODE4;
				break;
			case MODE4:
				if (isButtonPressed(BUTTON1) == 1) mode = MODE1;
				Setup();
				break;
			default:
				break;
			}
	}
}
